(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[3545],{3545:(e,t,o)=>{"use strict";o.r(t),o.d(t,{NewEmployeePageModule:()=>w});var n=o(8583),i=o(665),a=o(2859),r=o(5496),l=o(4762),s=o(9786),u=o(3018),c=o(5948);let d=(()=>{class e{constructor(e,t){this.toastCtrl=e,this.lanServ=t,this.result="",this.setLan()}postEmployee(e,t,o,n,i,a,r,l){s.Z.firestore().collection("employee").add({Id:e,Name:t,MiddleName:o,LastName:n,SecondLastName:i,Email:a,PhoneNumber:r,Status:"Active",created:s.Z.firestore.FieldValue.serverTimestamp(),owner:s.Z.auth().currentUser.uid,owner_name:s.Z.auth().currentUser.displayName}).then(e=>{this.result="Employee was added successfully.",l&&this.uploadEmployeePhoto(e.id,l)}).catch(e=>{this.result=e})}uploadEmployeePhoto(e,t){let o=s.Z.storage().ref("postEmployeePhoto/"+e).putString(t[0],"base64");o.on("state_changed",e=>{console.log(e)},e=>{},()=>{console.log("Photo uploaded successfully."),o.snapshot.ref.getDownloadURL().then(e=>{})})}setLan(){}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(a.yF),u.LFG(c.T))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=o(3194),m=o(5001),h=o(7053);function p(e,t){if(1&e&&(u.TgZ(0,"ion-row",18),u.TgZ(1,"ion-card",19),u._UZ(2,"img",20),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(2),u.Q6J("src",e.photo,u.LSH)}}const Z=function(){return["/employee"]},y=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i,a,r){this.route=e,this.newEmpService=t,this.toastCtrl=o,this.fireStorage=n,this.lanServ=i,this.authService=a,this.navCtrl=r,this.employeeId="",this.employeeName="",this.employeeMiddleName="",this.employeeLastName="",this.employeeSecondLastName="",this.employeeEmail="",this.employeePhoneNumber="",this.btnValidateEmail=!1,this.password="",this.daten=new Date,this.role="subordinate",this.langu="",this.userLanguage(),this.btnValidateEmail=!1}userLanguage(){this.authService.userDetails().forEach(e=>{s.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}getUserLanguage(e){throw new Error("Method not implemented.")}ValidEmail(e){return(0,l.__awaiter)(this,void 0,void 0,function*(){(yield s.Z.firestore().collection("employee").where("Email","==",e).get()).empty?this.btnValidateEmail=!1:(alert("Error: Employee email is in use."),this.btnValidateEmail=!0)})}ngOnInit(){}choosePhoto(e){this.selectedFile=e.target.files;let t=new FileReader;t.onload=e=>{this.photo=e.target.result},this.empImage=t.readAsDataURL(e.target.files[0])}postEmployee(){this.authService.userDetails().forEach(e=>{s.Z.firestore().collection("employee").add({Id:this.employeeId,Name:this.employeeName,MiddleName:this.employeeMiddleName,LastName:this.employeeLastName,SecondLastName:this.employeeSecondLastName,Email:this.employeeEmail,PhoneNumber:this.employeePhoneNumber,created:s.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName,Status:"Active",profileImageUrl:""}).then(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:" Employee was added successfully.",duration:3e3})).present(),this.uploadEmployeePhoto(e.id,this.photo)})).catch(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})}uploadEmployeePhoto(e,t){if(t){let o=s.Z.storage().ref("profilePhotos/"+e).putString(t,"data_url");o.on("state_changed",e=>{},e=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}),()=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:" Employee profile photo was added successfully.",duration:3e3})).present(),o.snapshot.ref.getDownloadURL().then(t=>{s.Z.firestore().collection("employee").doc(e).update({profileImageUrl:t,updatedOn:s.Z.firestore.FieldValue.serverTimestamp()}).then(()=>{}).catch(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})}))}}registerEmployee(){this.newEmpService.postEmployee(this.employeeId,this.employeeName,this.employeeMiddleName,this.employeeLastName,this.employeeSecondLastName,this.employeeEmail,this.employeePhoneNumber,this.empImage)}Logout(){this.authService.logoutUser().then(()=>(0,l.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(e=>(0,l.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,duration:3e3})).present()}))}refresh(e){this.infiniteEvent&&this.infiniteEvent.enable(!0),e.complete()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(r.F0),u.Y36(d),u.Y36(a.yF),u.Y36(g.Q1),u.Y36(m.L),u.Y36(h.$),u.Y36(a.SH))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-new-employee"]],decls:65,vars:11,consts:[["color","danger"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[1,"rowStyleTitle"],[1,"textTitle"],[1,"rowStyle"],["type","text","required","",1,"input",3,"ngModel","ngModelChange"],["type","text",1,"input",3,"ngModel","ngModelChange"],["type","text","riquired","",1,"input",3,"ngModel","ngModelChange"],["type","text","required","",1,"input",3,"ngModel","change","ngModelChange"],["type","file","accept","image/*","required","",1,"input",3,"change"],["class","rowStylePhoto",4,"ngIf"],[1,"rowStyleSub"],["color","primary",1,"btnSubmit",3,"disabled","click"],[1,"rowStylePhoto"],[1,"round-corners"],[1,"round-corners",3,"src"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-title"),u._uU(3,"New Employee"),u.qZA(),u.TgZ(4,"ion-buttons",1),u.TgZ(5,"ion-button",2),u._UZ(6,"ion-icon",3),u.qZA(),u.qZA(),u.TgZ(7,"ion-buttons",4),u.TgZ(8,"ion-button",5),u.NdJ("click",function(){return t.Logout()}),u._UZ(9,"ion-icon",6),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"ion-content"),u.TgZ(11,"ion-grid"),u.TgZ(12,"ion-row"),u._UZ(13,"br"),u.qZA(),u.TgZ(14,"ion-row",7),u.TgZ(15,"ion-col"),u.TgZ(16,"ion-text",8),u._uU(17,"Employee Form"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"ion-row"),u._UZ(19,"br"),u.qZA(),u.TgZ(20,"ion-row",9),u.TgZ(21,"ion-col"),u.TgZ(22,"ion-label"),u._uU(23,"Employee ID: "),u.TgZ(24,"ion-input",10),u.NdJ("ngModelChange",function(e){return t.employeeId=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"ion-row",9),u.TgZ(26,"ion-col"),u.TgZ(27,"ion-label"),u._uU(28,"Name:"),u.TgZ(29,"ion-input",10),u.NdJ("ngModelChange",function(e){return t.employeeName=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"ion-row",9),u.TgZ(31,"ion-col"),u.TgZ(32,"ion-label"),u._uU(33,"Middle Name: "),u.TgZ(34,"ion-input",11),u.NdJ("ngModelChange",function(e){return t.employeeMiddleName=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(35,"ion-row",9),u.TgZ(36,"ion-col"),u.TgZ(37,"ion-label"),u._uU(38,"Last Name: "),u.TgZ(39,"ion-input",12),u.NdJ("ngModelChange",function(e){return t.employeeLastName=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(40,"ion-row",9),u.TgZ(41,"ion-col"),u.TgZ(42,"ion-label"),u._uU(43,"Second Last Name: "),u.TgZ(44,"ion-input",11),u.NdJ("ngModelChange",function(e){return t.employeeSecondLastName=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(45,"ion-row",9),u.TgZ(46,"ion-col"),u.TgZ(47,"ion-label"),u._uU(48,"Email Address: "),u.TgZ(49,"ion-input",13),u.NdJ("change",function(){return t.ValidEmail(t.employeeEmail)})("ngModelChange",function(e){return t.employeeEmail=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(50,"ion-row",9),u.TgZ(51,"ion-col"),u.TgZ(52,"ion-label"),u._uU(53,"Phone Number: "),u.TgZ(54,"ion-input",10),u.NdJ("ngModelChange",function(e){return t.employeePhoneNumber=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(55,"ion-row",9),u.TgZ(56,"ion-col"),u.TgZ(57,"ion-label"),u._uU(58,"Photo: "),u.TgZ(59,"ion-input",14),u.NdJ("change",function(e){return t.choosePhoto(e)}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(60,p,3,1,"ion-row",15),u.TgZ(61,"ion-row",16),u.TgZ(62,"ion-col"),u.TgZ(63,"ion-button",17),u.NdJ("click",function(){return t.postEmployee()}),u._uU(64,"Submit"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(5),u.Q6J("routerLink",u.DdM(10,Z)),u.xp6(19),u.Q6J("ngModel",t.employeeId),u.xp6(5),u.Q6J("ngModel",t.employeeName),u.xp6(5),u.Q6J("ngModel",t.employeeMiddleName),u.xp6(5),u.Q6J("ngModel",t.employeeLastName),u.xp6(5),u.Q6J("ngModel",t.employeeSecondLastName),u.xp6(5),u.Q6J("ngModel",t.employeeEmail),u.xp6(5),u.Q6J("ngModel",t.employeePhoneNumber),u.xp6(6),u.Q6J("ngIf",""!=t.photo),u.xp6(3),u.Q6J("disabled",t.btnValidateEmail))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YG,a.YI,r.rH,a.gu,a.W2,a.jY,a.Nd,a.wI,a.yW,a.Q$,a.pK,a.j9,i.Q7,i.JJ,i.On,n.O5,a.PM],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff}.backArrow[_ngcontent-%COMP%]{color:#fff}.input[_ngcontent-%COMP%]{border-bottom:solid;border-width:1px;border-color:blue}.rowStyleTitle[_ngcontent-%COMP%]{text-align:center}.textTitle[_ngcontent-%COMP%]{font-size:30px}ion-input[_ngcontent-%COMP%]{background-color:#fff}.btnSubmit[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.rowStyleSub[_ngcontent-%COMP%]{text-align:center}.round-corners[_ngcontent-%COMP%]{border-radius:24px}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.Bz.forChild(y)],r.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.ez,i.u5,a.Pc,f]]}),e})()},5001:(e,t,o)=>{"use strict";o.d(t,{L:()=>r});var n=o(9786),i=o(3018),a=o(7053);let r=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return n.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return n.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((o,i)=>{n.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:n.Z.firestore.FieldValue.serverTimestamp()}).then(e=>o(e),e=>i(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(a.$))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5948:(e,t,o)=>{"use strict";o.d(t,{T:()=>l});var n=o(4762),i=o(9786),a=o(3018),r=o(2859);let l=(()=>{class e{constructor(e){this.toastCtrl=e,this.userLanguage=""}getUserLanguage(e){i.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.userLanguage=e.data().language}).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(r.yF))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);