(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[867],{867:(e,n,t)=>{"use strict";t.r(n),t.d(n,{ManageCleaningItemPageModule:()=>f});var i=t(8583),a=t(665),o=t(2859),r=t(5496),s=t(4762),l=t(9786),g=t(8272),c=t(3018),d=t(4155),u=t(5001),h=t(7053);function C(e,n){if(1&e){const e=c.EpF();c.TgZ(0,"ion-card"),c.TgZ(1,"ion-item-divider"),c.TgZ(2,"ion-button",18),c.NdJ("click",function(){const n=c.CHM(e).$implicit;return c.oxw().addArea(n.id,n.data().enCleaningArea,n.data().esCleaningArea)}),c._uU(3),c.qZA(),c._uU(4," \xa0 \xa0 \xa0 \xa0 "),c.TgZ(5,"ion-button",19),c.NdJ("click",function(){const n=c.CHM(e).$implicit;return c.oxw().deleteItem(n.id,n.data().enCleaningArea)}),c._UZ(6,"ion-icon",20),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=n.$implicit;c.xp6(3),c.AsE(" ",e.data().enCleaningArea," ",e.data().esCleaningArea," ")}}const A=function(){return["/manager"]},m=[{path:"",component:(()=>{class e{constructor(e,n,t,i,a,o,r){this.toastCtrl=e,this.loadingCtrl=n,this.route=t,this.modalCtrl=i,this.cleaningAreaService=a,this.lanServ=o,this.authService=r,this.enCleaningAreas=[],this.esCleaningAreas=[],this.cleaningAreas=[],this.enItemValue="",this.esItemValue="",this.senarea=[],this.sesarea=[],this.enIndex=0,this.enCleanItemTag=!0,this.enCleanItemInp=!0,this.esCleanItemTag=!0,this.esCleanItemInp=!0,this.enCleaningAreaTag="EN",this.enCleaningAreaIn="",this.esCleaningAreaTag="ES",this.esCleaningAreaIn="",this.btnEnabled=!0,this.btnEnabledFlag=!0,this.esCleaningAreaInEnabled=!0,this.langu="",this.userLanguage(),this.getCleaningAreas()}userLanguage(){this.authService.userDetails().forEach(e=>{l.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}getUserLanguage(e){}ngOnInit(){}enableEsCleaningAreaIn(){""!=this.enCleaningAreaIn?this.esCleaningAreaInEnabled=!1:(this.esCleaningAreaInEnabled=!0,this.esCleaningAreaIn="")}enableEnCleaningAreaInName(){this.btnEnabled=""==this.esCleaningAreaIn}addArea(e,n,t){return(0,s.__awaiter)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:g.L});return i.onDidDismiss().then(e=>{}),this.cleaningAreaService.cleaningAreaId=e,this.cleaningAreaService.cleaningAreaEs=t,this.cleaningAreaService.cleaningAreaEn=n,yield i.present()})}getCleaningAreas(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.cleaningAreas=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),l.Z.firestore().collection("cleaningArea").get().then(n=>(0,s.__awaiter)(this,void 0,void 0,function*(){n.forEach(e=>{this.cleaningAreas.push(e)}),(yield e).dismiss()})).catch(e=>{console.log(e)})})}onChangeEn(e){this.enCleanItemTag=!1,this.enCleanItemInp=!1,this.esCleanItemTag=!0,this.esCleanItemInp=!0,this.esCleaningAreas=[],this.getCleaningAreas()}onChangeEs(e){this.enCleanItemTag=!0,this.enCleanItemInp=!0,this.esCleanItemTag=!1,this.esCleanItemInp=!1,this.enCleaningAreas=[],this.getCleaningAreas()}postCleaningArea(){this.authService.userDetails().forEach(e=>{l.Z.firestore().collection("cleaningArea").add({enCleaningAreaLang:this.enCleaningAreaTag,enCleaningArea:this.enCleaningAreaIn,esCleaningAreaLang:this.esCleaningAreaTag,esCleaningArea:this.esCleaningAreaIn,created:l.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName}).then(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){console.log(e),(yield this.toastCtrl.create({message:"Cleaning Area was added successfully.",duration:3e3})).present()})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})}Logout(){l.Z.auth().signOut().then(()=>{this.route.navigateByUrl("login")})}deleteItem(e,n){l.Z.firestore().collection("cleaningArea").doc(e).delete().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Cleaning Area was deleted successfully.",duration:3e3})).present(),l.Z.firestore().collection("cleaningItem").where("cleaningAreaEn","==",n).get().then(e=>{e.forEach(e=>{l.Z.firestore().collection("cleaningItem").doc(e.id).delete().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Cleaning Item was deleted successfully.",duration:3e3})).present(),l.Z.firestore().collection(n).get().then(e=>{e.forEach(e=>{l.Z.firestore().collection("cleaningItem").doc(e.id).delete().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Areas names were deleted successfully.",duration:3e3})).present(),window.location.reload()})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})})})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})})})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}}return e.\u0275fac=function(n){return new(n||e)(c.Y36(o.yF),c.Y36(o.HT),c.Y36(r.F0),c.Y36(o.IN),c.Y36(d.k),c.Y36(u.L),c.Y36(h.$))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manage-cleaning-item"]],decls:33,vars:6,consts:[["color","danger"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[1,"colinputEn"],["disabled","",1,"inputEn"],[1,"inputEnT"],[2,"background-color","silver",3,"ngModel","ngModelChange","ionChange"],[1,"colinputEs"],["disabled","",1,"inputEs"],[1,"inputEsT"],[2,"background-color","silver",3,"ngModel","ngModelChange","ionChange","disabled"],["icon-only","","color","secondary",1,"button","button-small","addCleanItem",3,"disabled","click"],["name","add"],[4,"ngFor","ngForOf"],["color","light",1,"button","button-small","addCleanArea",3,"click"],["icon-only","","color","danger",1,"btnDel",3,"click"],["name","trash",1,"delAcc"]],template:function(e,n){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-title"),c._uU(3,"Manage Cleaning Item"),c.qZA(),c.TgZ(4,"ion-buttons",1),c.TgZ(5,"ion-button",2),c._UZ(6,"ion-icon",3),c.qZA(),c.qZA(),c.TgZ(7,"ion-buttons",4),c.TgZ(8,"ion-button",5),c.NdJ("click",function(){return n.Logout()}),c._UZ(9,"ion-icon",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"ion-content"),c.TgZ(11,"ion-grid"),c.TgZ(12,"ion-row"),c.TgZ(13,"ion-label"),c._uU(14,"Add Cleaning Area"),c.qZA(),c.qZA(),c.TgZ(15,"ion-row"),c.TgZ(16,"ion-grid"),c.TgZ(17,"ion-row"),c.TgZ(18,"ion-col",7),c.TgZ(19,"ion-input",8),c._uU(20,"EN"),c.qZA(),c.qZA(),c.TgZ(21,"ion-col",9),c.TgZ(22,"ion-input",10),c.NdJ("ngModelChange",function(e){return n.enCleaningAreaIn=e})("ionChange",function(){return n.enableEsCleaningAreaIn()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"ion-row"),c.TgZ(24,"ion-col",11),c.TgZ(25,"ion-input",12),c._uU(26,"ES"),c.qZA(),c.qZA(),c.TgZ(27,"ion-col",13),c.TgZ(28,"ion-input",14),c.NdJ("ngModelChange",function(e){return n.esCleaningAreaIn=e})("ionChange",function(){return n.enableEnCleaningAreaInName()})("disabled",function(){return n.esCleaningAreaInEnabled}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"ion-row"),c.TgZ(30,"ion-fab-button",15),c.NdJ("click",function(){return n.postCleaningArea()}),c._UZ(31,"ion-icon",16),c.qZA(),c.qZA(),c.qZA(),c.YNc(32,C,7,2,"ion-card",17),c.qZA()),2&e&&(c.xp6(5),c.Q6J("routerLink",c.DdM(5,A)),c.xp6(17),c.Q6J("ngModel",n.enCleaningAreaIn),c.xp6(6),c.Q6J("ngModel",n.esCleaningAreaIn),c.xp6(2),c.Q6J("disabled",n.btnEnabled),c.xp6(2),c.Q6J("ngForOf",n.cleaningAreas))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.YI,r.rH,o.gu,o.W2,o.jY,o.Nd,o.Q$,o.wI,o.pK,o.j9,a.JJ,a.On,o.W4,i.sg,o.PM,o.rH],styles:[".backArrow[_ngcontent-%COMP%]{color:#fff}.addCleanArea[_ngcontent-%COMP%]{margin-left:auto;width:100%}.addCleanArea[_ngcontent-%COMP%], .btnAdd[_ngcontent-%COMP%]{height:30px;margin-right:auto}.btnAdd[_ngcontent-%COMP%]{width:30px;margin-left:0;background-color:blue;color:#fff}.inputEn[_ngcontent-%COMP%]{text-align:center}.inputEn[_ngcontent-%COMP%], .inputEnName[_ngcontent-%COMP%], .inputEs[_ngcontent-%COMP%]{background-color:gray;font:700;width:40px}.inputEnName[_ngcontent-%COMP%]{text-align:center}.inputEsName[_ngcontent-%COMP%]{background-color:gray;font:700;width:40px}.colinputEn[_ngcontent-%COMP%]:first-of-type, .colinputEnName[_ngcontent-%COMP%]:first-of-type, .colinputEs[_ngcontent-%COMP%]:first-of-type, .colinputEsName[_ngcontent-%COMP%]:first-of-type{flex:0 0 10px}.addCleanItem[_ngcontent-%COMP%]{height:50px;margin-left:auto;margin-right:auto}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,a.u5,o.Pc,p]]}),e})()}}]);