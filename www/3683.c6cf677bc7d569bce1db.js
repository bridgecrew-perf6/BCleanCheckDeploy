(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[3683],{3683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ManagerCheckListPageModule:()=>k});var a=i(8583),o=i(665),n=i(2859),r=i(5496),s=i(4762),c=i(9786),l=i(2710),g=i(3018),u=i(7232),h=i(5001),d=i(7053);function m(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-card"),g.TgZ(1,"ion-item-divider"),g.TgZ(2,"ion-grid"),g.TgZ(3,"ion-row"),g.TgZ(4,"ion-col"),g._UZ(5,"img",9),g.qZA(),g.TgZ(6,"ion-col"),g.TgZ(7,"ion-label"),g._uU(8),g.qZA(),g.TgZ(9,"ion-label"),g._uU(10),g.ALo(11,"date"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-row"),g.TgZ(13,"ion-col"),g.TgZ(14,"ion-label"),g._uU(15),g.qZA(),g.qZA(),g._UZ(16,"ion-col"),g.qZA(),g.TgZ(17,"ion-row"),g.TgZ(18,"ion-col"),g.TgZ(19,"ion-label"),g._uU(20),g.qZA(),g.qZA(),g.TgZ(21,"ion-col",10),g.TgZ(22,"ion-button",11),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().gotoCheckList(t.id)}),g._UZ(23,"ion-icon",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw();g.xp6(5),g.Q6J("src",e.employeePhoto,g.LSH),g.xp6(3),g.Oqu(e.employeeCompleteName),g.xp6(2),g.Oqu(g.xi3(11,7,1e3*e.chkDate.seconds,"medium")),g.xp6(5),g.AsE("",i.area," ",e.area,""),g.xp6(5),g.AsE("",i.areaname," ",e.name,"")}}const Z=function(){return["/manager"]},p=[{path:"",component:(()=>{class e{constructor(e,t,i,a,o,n,r){this.toastCtrl=e,this.loadingCtrl=t,this.modalCtrl=i,this.chkRevService=a,this.route=o,this.lanServ=n,this.authService=r,this.checklist=[],this.chkmgt="",this.area="",this.areaname="",this.langu="",this.getCheckLists(),this.userLanguage()}userLanguage(){this.authService.userDetails().forEach(e=>{c.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}ngOnInit(){}ionViewDidLoad(){}getCheckLists(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.checklist=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),c.Z.firestore().collection("checkList").where("checkListStatus","==","completed").get().then(e=>{e.forEach(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){c.Z.firestore().collection("userRole").doc(e.data().owner).get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){c.Z.firestore().collection("employee").where("Email","==",t.data().userEmail).get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{this.checklist.push({employeePhoto:t.data().profileImageUrl,employeeCompleteName:t.data().Name+" "+t.data().LastName+" "+t.data().SecondLastName,chkDate:e.data().created,area:e.data().area,name:e.data().areaName,id:e.id})})})).then(()=>{}).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}))}))}).then(()=>{}).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()})),(yield e).dismiss()})}gotoCheckList(e){return(0,s.__awaiter)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:l.D});return t.onDidDismiss().then(e=>{this.getCheckLists()}),this.chkRevService.checklistItemsId=e,yield t.present()})}Logout(){c.Z.auth().signOut().then(()=>{this.route.navigateByUrl("login")})}getUserLanguage(e){switch(e){case"English":this.chkmgt="Checklists Management",this.area="Area: ",this.areaname="Area Name: ";break;case"Spanish":this.chkmgt="Administratci\xf3n de Checklists",this.area="Area: ",this.areaname="Nombre del Area: "}}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(n.yF),g.Y36(n.HT),g.Y36(n.IN),g.Y36(u.q),g.Y36(r.F0),g.Y36(h.L),g.Y36(d.$))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-manager-check-list"]],decls:14,vars:4,consts:[["color","danger"],[1,"lblHeading"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[4,"ngFor","ngForOf"],[1,"image",3,"src"],[2,"text-align-last","right"],["color","secondary","icon-only","",3,"click"],["name","arrow-forward"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar",0),g.TgZ(2,"ion-title"),g.TgZ(3,"small"),g.TgZ(4,"ion-label",1),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"ion-buttons",2),g.TgZ(7,"ion-button",3),g._UZ(8,"ion-icon",4),g.qZA(),g.qZA(),g.TgZ(9,"ion-buttons",5),g.TgZ(10,"ion-button",6),g.NdJ("click",function(){return t.Logout()}),g._UZ(11,"ion-icon",7),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-content"),g.YNc(13,m,24,10,"ion-card",8),g.qZA()),2&e&&(g.xp6(5),g.Oqu(t.chkmgt),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Z)),g.xp6(6),g.Q6J("ngForOf",t.checklist))},directives:[n.Gu,n.sr,n.wd,n.Q$,n.Sm,n.YG,n.YI,r.rH,n.gu,n.W2,a.sg,n.PM,n.rH,n.jY,n.Nd,n.wI],pipes:[a.uU],styles:[".backArrow[_ngcontent-%COMP%]{color:#fff}.image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}.lblHeading[_ngcontent-%COMP%]{color:#fff}.lbls[_ngcontent-%COMP%]{color:blue}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[r.Bz.forChild(p)],r.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.ez,o.u5,n.Pc,f]]}),e})()},5001:(e,t,i)=>{"use strict";i.d(t,{L:()=>r});var a=i(9786),o=i(3018),n=i(7053);let r=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return a.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return a.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((i,o)=>{a.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:a.Z.firestore.FieldValue.serverTimestamp()}).then(e=>i(e),e=>o(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(n.$))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);