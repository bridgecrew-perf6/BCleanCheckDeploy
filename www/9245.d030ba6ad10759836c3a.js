(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[9245],{5001:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var i=n(9786),o=n(3018),r=n(7053);let a=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return i.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return i.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((n,o)=>{i.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:i.Z.firestore.FieldValue.serverTimestamp()}).then(e=>n(e),e=>o(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.$))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SupervisorEmployeePageModule:()=>w});var i=n(8583),o=n(665),r=n(2859),a=n(5496),s=n(4762),l=n(9786),c=n(5205),g=n(3018),u=n(9089),d=n(8805),h=n(3367),m=n(5001),p=n(7053);function f(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-card"),g.TgZ(1,"ion-item-divider"),g.TgZ(2,"ion-grid"),g.TgZ(3,"ion-row",10),g._UZ(4,"img",11),g.qZA(),g.TgZ(5,"ion-row"),g.TgZ(6,"ion-input",12),g.NdJ("ngModelChange",function(t){return g.CHM(e),g.oxw().employeeId=t}),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"ion-row"),g.TgZ(9,"ion-input",12),g.NdJ("ngModelChange",function(t){return g.CHM(e),g.oxw().employeeName=t}),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"ion-row"),g.TgZ(12,"ion-input",12),g.NdJ("ngModelChange",function(t){return g.CHM(e),g.oxw().employeeEmail=t}),g._uU(13),g.qZA(),g.qZA(),g.TgZ(14,"ion-row"),g.TgZ(15,"ion-button",13),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().addWarning(t.data().Email,t.data().Name)}),g._UZ(16,"ion-icon",14),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,n=g.oxw();g.xp6(4),g.Q6J("src",e.data().profileImageUrl,g.LSH),g.xp6(2),g.Q6J("ngModel",n.employeeId),g.xp6(1),g.AsE("",n.empId," ",e.data().Id,""),g.xp6(2),g.Q6J("ngModel",n.employeeName),g.xp6(1),g.lnq("",n.empName," ",e.data().Name," ",e.data().LastName,""),g.xp6(2),g.Q6J("ngModel",n.employeeEmail),g.xp6(1),g.AsE("",n.empEmail," ",e.data().Email,"")}}const Z=function(){return["/supervisor"]},y=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,r,a,s,l,c){this.route=e,this.loadingCtrl=t,this.toastCtrl=n,this.modalCtrl=i,this.userService=o,this.empTranService=r,this.warningService=a,this.lanServ=s,this.authService=l,this.navCtrl=c,this.profileImages=[],this.employees=[],this.employeeEmails=[],this.employeeId="",this.employeeName="",this.employeeEmail="",this.emp="",this.empId="",this.empName="",this.empEmail="",this.langu="",this.userId="",this.GetSubordinateUsers(),this.displayEmployeeProfile(),this.userLanguage()}userLanguage(){this.authService.userDetails().forEach(e=>{l.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}ngOnInit(){}GetSubordinateUsers(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.employeeEmails=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),l.Z.firestore().collection("userRole").where("role","==","subordinate").get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(e=>{this.employeeEmails.push(e.data().userEmail)}),(yield e).dismiss()})).catch(e=>{console.log(e)})})}displayEmployeeProfile(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.employees=[],this.profileImages=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),l.Z.firestore().collection("employee").get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(e=>{this.employeeEmails.forEach(t=>{t==e.data().Email&&(this.employees.push(e),l.Z.storage().ref("profilePhotos/"+e.id).getDownloadURL().then(e=>{this.profileImages.push(e)}))})}),(yield e).dismiss()})).catch(e=>{console.log(e)})})}addWarning(e,t){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.warningService.User=e,this.warningService.UserName=t;const n=yield this.modalCtrl.create({component:c.X});return n.onDidDismiss().then(e=>{}),yield n.present()})}Logout(){this.authService.logoutUser().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,duration:3e3})).present()}))}refresh(e){this.infiniteEvent&&this.infiniteEvent.enable(!0),e.complete()}getUserLanguage(e){switch(e){case"English":this.emp="Employee",this.empId="Employee ID: ",this.empName="Name: ",this.empEmail="Email: ";break;case"Spanish":this.emp="Empleado",this.empId="C\xf3digo Empleado: ",this.empName="Nombre: ",this.empEmail="Correo: "}}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(a.F0),g.Y36(r.HT),g.Y36(r.yF),g.Y36(r.IN),g.Y36(u.K),g.Y36(d.F),g.Y36(h.q),g.Y36(m.L),g.Y36(p.$),g.Y36(r.SH))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-supervisor-employee"]],decls:15,vars:4,consts:[["color","danger"],[1,"blHeading"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],[1,"rowStyle"],["width","200px","height","300px",2,"margin-left","auto","margin-right","auto",3,"src"],[3,"ngModel","ngModelChange"],["icon-only","","color","warning",1,"btnTran",3,"click"],["name","warning",1,"settings"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar",0),g.TgZ(2,"ion-title"),g._UZ(3,"ion-label",1),g._uU(4),g.qZA(),g.TgZ(5,"ion-buttons",2),g.TgZ(6,"ion-button",3),g._UZ(7,"ion-icon",4),g.qZA(),g.qZA(),g.TgZ(8,"ion-buttons",5),g.TgZ(9,"ion-button",6),g.NdJ("click",function(){return t.Logout()}),g._UZ(10,"ion-icon",7),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"ion-content"),g.TgZ(12,"ion-refresher",8),g.NdJ("ionRefresh",function(e){return t.refresh(e)}),g._UZ(13,"ion-refresher-content"),g.qZA(),g.YNc(14,f,17,11,"ion-card",9),g.qZA()),2&e&&(g.xp6(4),g.Oqu(t.emp),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Z)),g.xp6(8),g.Q6J("ngForOf",t.employees))},directives:[r.Gu,r.sr,r.wd,r.Q$,r.Sm,r.YG,r.YI,a.rH,r.gu,r.W2,r.nJ,r.Wo,i.sg,r.PM,r.rH,r.jY,r.Nd,r.pK,r.j9,o.JJ,o.On],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff}.backArrow[_ngcontent-%COMP%]{color:#fff}.addEmp[_ngcontent-%COMP%]{font-size:50px}.addEmpBtn[_ngcontent-%COMP%]{height:50px;margin-left:auto;margin-right:auto}.rowStyle[_ngcontent-%COMP%]{align-content:center}.btnTran[_ngcontent-%COMP%]{color:secondary}.lblHeading[_ngcontent-%COMP%]{color:#fff}.lbls[_ngcontent-%COMP%]{color:blue}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.Bz.forChild(y)],a.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,o.u5,r.Pc,v]]}),e})()}}]);