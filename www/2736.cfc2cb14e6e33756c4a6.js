(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[2736],{2736:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ManagerApprChkPageModule:()=>f});var a=o(8583),n=o(665),i=o(2859),r=o(5496),s=o(4762),c=o(9786),l=o(3018),g=o(5001),u=o(7053);function h(e,t){if(1&e&&(l.TgZ(0,"ion-label",11),l._uU(1),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij("Comment: ",e.aprComment,"")}}function d(e,t){if(1&e&&(l.TgZ(0,"ion-card"),l.TgZ(1,"ion-row"),l.TgZ(2,"ion-col"),l._UZ(3,"img",9),l.qZA(),l.TgZ(4,"ion-col"),l.TgZ(5,"ion-label"),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-row"),l.TgZ(8,"ion-col"),l.TgZ(9,"ion-label"),l._uU(10),l.ALo(11,"date"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"ion-row"),l.YNc(13,h,2,1,"ion-label",10),l.qZA(),l.TgZ(14,"ion-row"),l.TgZ(15,"ion-label"),l._uU(16),l.qZA(),l.qZA(),l.qZA()),2&e){const e=t.$implicit,o=l.oxw();l.xp6(3),l.Q6J("src",e.employeePhoto,l.LSH),l.xp6(3),l.Oqu(e.employeeCompleteName),l.xp6(4),l.Oqu(l.xi3(11,5,1e3*e.chkDate.seconds,"medium")),l.xp6(3),l.Q6J("ngIf",""!=e.aprComment),l.xp6(3),l.hij("Approved By: ",o.empName,"")}}const p=function(){return["/manager"]},m=[{path:"",component:(()=>{class e{constructor(e,t,o,a,n,i){this.route=e,this.toastCtrl=t,this.loadingCtrl=o,this.lanServ=a,this.authService=n,this.navCtrl=i,this.approvedChk=[],this.apprchk="",this.comment="",this.empName="",this.langu="",this.userLanguage(),this.getApprovedCheckList()}ngOnInit(){}userLanguage(){this.authService.userDetails().forEach(e=>{c.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}Logout(){this.authService.logoutUser().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,duration:3e3})).present()}))}getApprovedCheckList(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.approvedChk=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),c.Z.firestore().collection("checkList").where("checkListStatus","==","approved").get().then(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){e.forEach(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){c.Z.firestore().collection("userRole").doc(e.data().owner).get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){c.Z.firestore().collection("employee").where("Email","==",t.data().userEmail).get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{this.approvedChk.push({employeePhoto:t.data().profileImageUrl,employeeCompleteName:t.data().Name+" "+t.data().LastName+" "+t.data().SecondLastName,chkDate:e.data().created,status:e.data().checkListStatus,aprComment:e.data().approvalComment,id:e.id})})}))})),this.getApprover(e.data().updatedBy)}))})),(yield e).dismiss()})}getApprover(e){c.Z.firestore().collection("employee").where("Email","==",e).get().then(e=>{e.forEach(e=>{this.empName=e.data().Name+" "+e.data().LastName+" "+e.data().SecondLastName})})}getUserLanguage(e){switch(e){case"English":this.apprchk="Approved Checklists",this.comment="Comment: ";break;case"Spanish":this.apprchk="Checklists Aprobados",this.comment="Comentario: "}}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.F0),l.Y36(i.yF),l.Y36(i.HT),l.Y36(g.L),l.Y36(u.$),l.Y36(i.SH))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-manager-appr-chk"]],decls:13,vars:4,consts:[["color","danger"],[1,"lblHeading"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[4,"ngFor","ngForOf"],[1,"image",3,"src"],["class","comm",4,"ngIf"],[1,"comm"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-title"),l.TgZ(3,"ion-label",1),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"ion-buttons",2),l.TgZ(6,"ion-button",3),l._UZ(7,"ion-icon",4),l.qZA(),l.qZA(),l.TgZ(8,"ion-buttons",5),l.TgZ(9,"ion-button",6),l.NdJ("click",function(){return t.Logout()}),l._UZ(10,"ion-icon",7),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"ion-content"),l.YNc(12,d,17,8,"ion-card",8),l.qZA()),2&e&&(l.xp6(4),l.Oqu(t.apprchk),l.xp6(2),l.Q6J("routerLink",l.DdM(3,p)),l.xp6(6),l.Q6J("ngForOf",t.approvedChk))},directives:[i.Gu,i.sr,i.wd,i.Q$,i.Sm,i.YG,i.YI,r.rH,i.gu,i.W2,a.sg,i.PM,i.Nd,i.wI,a.O5],pipes:[a.uU],styles:[".backArrow[_ngcontent-%COMP%]{color:#fff}.image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}.comm[_ngcontent-%COMP%], .st[_ngcontent-%COMP%]{color:green}.lblHeading[_ngcontent-%COMP%]{color:#fff}.lbls[_ngcontent-%COMP%]{color:blue}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.ez,n.u5,i.Pc,Z]]}),e})()},5001:(e,t,o)=>{"use strict";o.d(t,{L:()=>r});var a=o(9786),n=o(3018),i=o(7053);let r=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return a.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return a.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((o,n)=>{a.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:a.Z.firestore.FieldValue.serverTimestamp()}).then(e=>o(e),e=>n(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(i.$))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);