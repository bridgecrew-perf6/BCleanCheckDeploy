(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[432],{432:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ManageTimeTrackingPendingPageModule:()=>w});var n=i(8583),o=i(665),a=i(2859),r=i(5496),s=i(4762),c=i(9786),g=i(3018),u=i(5001),d=i(7053);function l(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"ion-card",10),g.TgZ(1,"ion-item-divider"),g.TgZ(2,"ion-grid"),g.TgZ(3,"ion-row",7),g._UZ(4,"img",11),g.qZA(),g.TgZ(5,"ion-row"),g.TgZ(6,"ion-card-subtitle",12),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"ion-row"),g.TgZ(9,"ion-label",13),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"ion-row"),g._uU(12),g.qZA(),g.TgZ(13,"ion-row"),g._uU(14),g.qZA(),g.TgZ(15,"ion-row"),g._uU(16),g.qZA(),g.TgZ(17,"ion-row"),g._uU(18),g.qZA(),g.TgZ(19,"ion-row"),g.TgZ(20,"ion-label",13),g._uU(21),g.qZA(),g.qZA(),g.TgZ(22,"ion-row"),g._uU(23),g.qZA(),g.TgZ(24,"ion-row"),g._uU(25),g.qZA(),g.TgZ(26,"ion-row"),g._uU(27),g.qZA(),g.TgZ(28,"ion-row"),g._uU(29),g.qZA(),g.TgZ(30,"ion-row"),g.TgZ(31,"ion-button",14),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().UpdateStatus(e.wid,e.bid)}),g._uU(32,"Approve"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(4),g.Q6J("src",t.profImage,g.LSH),g.xp6(3),g.hij(" ",t.employee," "),g.xp6(3),g.Oqu(t.wtypeTime),g.xp6(2),g.hij(" Date: ",t.wdate," "),g.xp6(2),g.hij(" Status: ",t.wstatus," "),g.xp6(2),g.hij(" In: ",t.wtimeIn," "),g.xp6(2),g.hij(" Out: ",t.wtimeOut," "),g.xp6(3),g.hij(" ",t.btypeTime,""),g.xp6(2),g.hij(" Date: ",t.bdate," "),g.xp6(2),g.hij(" Status: ",t.bstatus," "),g.xp6(2),g.hij(" In: ",t.wtimeIn," "),g.xp6(2),g.hij(" Out: ",t.btimeOut," ")}}const h=function(){return["/manager"]},p=function(){return["/manage-time-tracking"]},m=function(){return["/manage-time-tracking-pending"]},Z=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,a){this.toastCtrl=t,this.loadingCtrl=e,this.route=i,this.lanServ=n,this.authService=o,this.navCtrl=a,this.timeList=[],this.langu="",this.userLanguage(),this.getPendingWorkTime()}ngOnInit(){}userLanguage(){this.authService.userDetails().forEach(t=>{c.Z.firestore().collection("userLanguage").doc(t.uid).get().then(t=>{this.getUserLanguage(t.data().language)})})}getUserLanguage(t){}Logout(){this.authService.logoutUser().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t,duration:3e3})).present()}))}getPendingWorkTime(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.timeList=[];let t=this.loadingCtrl.create({message:"Loading ..."});(yield t).present(),c.Z.firestore().collection("WorkTime").where("Status","==","Pending").get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{c.Z.firestore().collection("employee").where("Email","==",t.data().UserEmail).get().then(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){e.forEach(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){var i=e.data().Name+" "+e.data().LastName+" "+e.data().SecondLastName;c.Z.firestore().collection("BreakTime").where("Status","==","Pending").where("UserEmail","==",t.data().UserEmail).get().then(n=>(0,s.__awaiter)(this,void 0,void 0,function*(){n.forEach(n=>(0,s.__awaiter)(this,void 0,void 0,function*(){this.timeList.push({profImage:e.data().profileImageUrl,employee:i,wtypeTime:"Work Time",wapproveBy:"",wid:t.id,wdate:t.data().Date,wstatus:t.data().Status,wtimeIn:t.data().TimeIn,wtimeOut:t.data().TimeOut,btypeTime:"Break Time",bapproveBy:"",bid:n.id,bdate:n.data().Date,bstatus:n.data().Status,btimeIn:n.data().TimeIn,btimeOut:n.data().TimeOut})}))}))}))}))})})).then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield t).dismiss()})).catch(()=>{})})}Refresh(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.timeList=[];let t=this.loadingCtrl.create({message:"Loading ..."});(yield t).present(),c.Z.firestore().collection("TimeEntry").where("Status","==","Pending").get().then(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{this.timeList.push(t),this.option=t.data().Status})})).then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield t).dismiss()})).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:3e3})).present()}))})}UpdateStatus(t,e){this.authService.userDetails().forEach(i=>{this.authService.userDetails().forEach(i=>{c.Z.firestore().collection("WorkTime").doc(t).update({Status:"Approved",ApprovedBy:i.displayName,updatedOn:c.Z.firestore.FieldValue.serverTimestamp()}).then(()=>{c.Z.firestore().collection("BreakTime").doc(e).update({Status:"Approved",ApprovedBy:i.displayName,updatedOn:c.Z.firestore.FieldValue.serverTimestamp()}).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:3e3})).present()})),this.getPendingWorkTime()}).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:3e3})).present()}))})})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(a.yF),g.Y36(a.HT),g.Y36(r.F0),g.Y36(u.L),g.Y36(d.$),g.Y36(a.SH))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-manage-time-tracking-pending"]],decls:25,vars:7,consts:[["color","danger"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[1,"rowStyle"],[1,"btnIn",3,"routerLink"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["width","200px","height","300px",2,"margin-left","auto","margin-right","auto",3,"src"],[2,"font-size","large","font-weight","bold"],[1,"lblhead"],["color","success",2,"margin-left","auto","margin-right","auto","padding-top","5px","padding-bottom","5px","height","40px","width","80px",3,"click"]],template:function(t,e){1&t&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar",0),g.TgZ(2,"ion-title"),g._uU(3,"Time Tracking"),g.qZA(),g.TgZ(4,"ion-buttons",1),g.TgZ(5,"ion-button",2),g._UZ(6,"ion-icon",3),g.qZA(),g.qZA(),g.TgZ(7,"ion-buttons",4),g.TgZ(8,"ion-button",5),g.NdJ("click",function(){return e.Logout()}),g._UZ(9,"ion-icon",6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"ion-content"),g.TgZ(11,"ion-grid"),g.TgZ(12,"ion-row",7),g._UZ(13,"ion-col"),g.TgZ(14,"ion-col"),g.TgZ(15,"ion-button",8),g._uU(16,"Approved"),g.qZA(),g.qZA(),g.TgZ(17,"ion-col"),g.TgZ(18,"ion-button",8),g._uU(19,"Pending"),g.qZA(),g.qZA(),g._UZ(20,"ion-col"),g._UZ(21,"ion-col"),g._UZ(22,"ion-col"),g._UZ(23,"ion-col"),g.qZA(),g.qZA(),g.YNc(24,l,33,12,"ion-card",9),g.qZA()),2&t&&(g.xp6(5),g.Q6J("routerLink",g.DdM(4,h)),g.xp6(10),g.Q6J("routerLink",g.DdM(5,p)),g.xp6(3),g.Q6J("routerLink",g.DdM(6,m)),g.xp6(6),g.Q6J("ngForOf",e.timeList))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YG,a.YI,r.rH,a.gu,a.W2,a.jY,a.Nd,a.wI,n.sg,a.PM,a.rH,a.tO,a.Q$],styles:[".rowStyle[_ngcontent-%COMP%]{background-color:#fff;padding-left:30px;border-radius:30px;margin-top:10px}.rowStyle[_ngcontent-%COMP%], .rowStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.rowStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:13px;font-size:64px;border:solid;background-color:#daa520;position:relative}.rowStyle[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff}.colStyle[_ngcontent-%COMP%]{align-items:center}.headerStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:0}.backArrow[_ngcontent-%COMP%]{color:#fff}.lblhead[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;text-align:center;color:blue;padding-top:5px;padding-bottom:5px}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[n.ez,o.u5,a.Pc,f]]}),t})()},5001:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var n=i(9786),o=i(3018),a=i(7053);let r=(()=>{class t{constructor(t){this.authService=t,this.lang="",this.userId=""}getLano(t){var e="";return n.Z.firestore().collection("userLanguage").doc(t).get().then(t=>{e=t.data().language}),e}getLanguage(t){return n.Z.firestore().collection("userLanguage").doc(t).get().then(t=>{this.lang=t.data().language}),this.lang}languageValidation(){}addLanguage(t,e){return new Promise((i,o)=>{n.Z.firestore().collection("userLanguage").doc(e).set({language:t,updatedOn:n.Z.firestore.FieldValue.serverTimestamp()}).then(t=>i(t),t=>o(t))})}setLanguage(){}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.$))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);