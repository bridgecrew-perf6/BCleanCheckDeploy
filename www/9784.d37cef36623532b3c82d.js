(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[9784],{9784:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ManageTimeTrackingPageModule:()=>w});var o=i(8583),n=i(665),a=i(2859),r=i(5496),s=i(4762),g=i(9786),l=i(3018),c=i(5001),u=i(7053);function d(t,e){if(1&t&&(l.TgZ(0,"ion-card",11),l.TgZ(1,"ion-item-divider"),l.TgZ(2,"ion-grid"),l.TgZ(3,"ion-row",8),l._UZ(4,"img",12),l.qZA(),l.TgZ(5,"ion-row"),l.TgZ(6,"ion-card-subtitle",13),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"ion-row"),l.TgZ(9,"ion-label",14),l._uU(10),l.qZA(),l.qZA(),l.TgZ(11,"ion-row"),l._uU(12),l.qZA(),l.TgZ(13,"ion-row"),l._uU(14),l.qZA(),l.TgZ(15,"ion-row"),l._uU(16),l.qZA(),l.TgZ(17,"ion-row"),l._uU(18),l.qZA(),l.TgZ(19,"ion-row"),l._uU(20),l.qZA(),l.TgZ(21,"ion-row"),l.TgZ(22,"ion-label",14),l._uU(23),l.qZA(),l.qZA(),l.TgZ(24,"ion-row"),l._uU(25),l.qZA(),l.TgZ(26,"ion-row"),l._uU(27),l.qZA(),l.TgZ(28,"ion-row"),l._uU(29),l.qZA(),l.TgZ(30,"ion-row"),l._uU(31),l.qZA(),l.TgZ(32,"ion-row"),l._uU(33),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.xp6(4),l.Q6J("src",t.profImage,l.LSH),l.xp6(3),l.hij(" ",t.employee," "),l.xp6(3),l.hij(" ",t.wtypeTime,""),l.xp6(2),l.hij(" Approved By: ",t.wapproveBy," "),l.xp6(2),l.hij(" Date: ",t.wdate," "),l.xp6(2),l.hij(" Status: ",t.wstatus," "),l.xp6(2),l.hij(" In: ",t.wtimeIn," "),l.xp6(2),l.hij(" Out: ",t.wtimeOut," "),l.xp6(3),l.hij(" ",t.btypeTime,""),l.xp6(2),l.hij(" Approved By: ",t.bapproveBy," "),l.xp6(2),l.hij(" Date: ",t.bdate," "),l.xp6(2),l.hij(" Status: ",t.bstatus," "),l.xp6(2),l.hij(" In: ",t.wtimeIn," "),l.xp6(2),l.hij(" Out: ",t.btimeOut," ")}}const p=function(){return["/manager"]},h=function(){return["/manage-time-tracking"]},m=function(){return["/manage-time-tracking-pending"]},Z=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,a){this.toastCtrl=t,this.loadingCtrl=e,this.route=i,this.lanServ=o,this.authService=n,this.navCtrl=a,this.timeList=[],this.ttracking="",this.appr="",this.pend="",this.email="",this.timel="",this.approvedWorkTime=[],this.breaTime=[],this.langu="",this.userLanguage(),this.Refresh(),this.getApprovedTime()}ngOnInit(){}userLanguage(){this.authService.userDetails().forEach(t=>{g.Z.firestore().collection("userLanguage").doc(t.uid).get().then(t=>{this.getUserLanguage(t.data().language)})})}Logout(){this.authService.logoutUser().then(()=>(0,s.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t,duration:3e3})).present()}))}getApprovedTime(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.approvedWorkTime=[];let t=this.loadingCtrl.create({message:"Loading ..."});(yield t).present(),g.Z.firestore().collection("WorkTime").where("Status","==","Approved").get().then(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){e.forEach(t=>{g.Z.firestore().collection("employee").where("Email","==",t.data().UserEmail).get().then(e=>{e.forEach(e=>{var i=e.data().Name+" "+e.data().LastName+" "+e.data().SecondLastName;g.Z.firestore().collection("BreakTime").where("Status","==","Approved").where("UserEmail","==",t.data().UserEmail).get().then(o=>(0,s.__awaiter)(this,void 0,void 0,function*(){o.forEach(o=>{this.approvedWorkTime.push({profImage:e.data().profileImageUrl,employee:i,wtypeTime:"Work Time",wapproveBy:this.getEmployeeByEmail(t.data().ApprovedBy),wdate:t.data().Date,wstatus:t.data().Status,wtimeIn:t.data().TimeIn,wtimeOut:t.data().TimeOut,btypeTime:"Break Time",bapproveBy:this.getEmployeeByEmail(o.data().ApprovedBy),bdate:o.data().Date,bstatus:o.data().Status,btimeIn:o.data().TimeIn,btimeOut:o.data().TimeOut})})}))})})}),(yield t).dismiss()}))})}getEmployeeByEmail(t){var e="";return g.Z.firestore().collection("employee").where("Email","==",t).get().then(t=>{t.forEach(t=>{e=t.data().Name+" "+t.data().LastName+" "+t.data().SecondLastName})}),e}Refresh(){return(0,s.__awaiter)(this,void 0,void 0,function*(){this.timeList=[];let t=this.loadingCtrl.create({message:"Loading ..."});(yield t).present(),g.Z.firestore().collection("WorkTime").where("Status","==","Approved").get().then(e=>(0,s.__awaiter)(this,void 0,void 0,function*(){e.forEach(t=>{this.timeList.push(t),this.option=t.data().Status}),(yield t).dismiss()})).catch(t=>(0,s.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:3e3})).present()}))})}getUserLanguage(t){switch(t){case"English":this.ttracking="Time Control",this.appr="Approved",this.pend="Pending",this.email="Email: ",this.timel="Time: ";break;case"Spanish":this.ttracking="Control de Tiempo",this.appr="Aprobado",this.pend="Pendiente",this.email="Correo: ",this.timel="Tiempo: "}}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(a.yF),l.Y36(a.HT),l.Y36(r.F0),l.Y36(c.L),l.Y36(u.$),l.Y36(a.SH))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-manage-time-tracking"]],decls:26,vars:10,consts:[["color","danger"],[1,"lblHeading"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],[1,"rowStyle"],[1,"btnIn",3,"routerLink"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["width","200px","height","300px",2,"margin-left","auto","margin-right","auto",3,"src"],[2,"font-size","large","font-weight","bold"],[1,"lblhead"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-title"),l.TgZ(3,"ion-label",1),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"ion-buttons",2),l.TgZ(6,"ion-button",3),l._UZ(7,"ion-icon",4),l.qZA(),l.qZA(),l.TgZ(8,"ion-buttons",5),l.TgZ(9,"ion-button",6),l.NdJ("click",function(){return e.Logout()}),l._UZ(10,"ion-icon",7),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"ion-content"),l.TgZ(12,"ion-grid"),l.TgZ(13,"ion-row",8),l._UZ(14,"ion-col"),l.TgZ(15,"ion-col"),l.TgZ(16,"ion-button",9),l._uU(17),l.qZA(),l.qZA(),l.TgZ(18,"ion-col"),l.TgZ(19,"ion-button",9),l._uU(20),l.qZA(),l.qZA(),l._UZ(21,"ion-col"),l._UZ(22,"ion-col"),l._UZ(23,"ion-col"),l._UZ(24,"ion-col"),l.qZA(),l.qZA(),l.YNc(25,d,34,14,"ion-card",10),l.qZA()),2&t&&(l.xp6(4),l.Oqu(e.ttracking),l.xp6(2),l.Q6J("routerLink",l.DdM(7,p)),l.xp6(10),l.Q6J("routerLink",l.DdM(8,h)),l.xp6(1),l.Oqu(e.appr),l.xp6(2),l.Q6J("routerLink",l.DdM(9,m)),l.xp6(1),l.Oqu(e.pend),l.xp6(5),l.Q6J("ngForOf",e.approvedWorkTime))},directives:[a.Gu,a.sr,a.wd,a.Q$,a.Sm,a.YG,a.YI,r.rH,a.gu,a.W2,a.jY,a.Nd,a.wI,o.sg,a.PM,a.rH,a.tO],styles:[".rowStyle[_ngcontent-%COMP%]{background-color:#fff;padding-left:30px;border-radius:30px;margin-top:10px}.rowStyle[_ngcontent-%COMP%], .rowStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.rowStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:13px;font-size:64px;border:solid;background-color:#daa520;position:relative}.rowStyle[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff}.colStyle[_ngcontent-%COMP%]{align-items:center}.headerStyle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:0}.backArrow[_ngcontent-%COMP%], .lblHeading[_ngcontent-%COMP%]{color:#fff}.lblhead[_ngcontent-%COMP%], .lbls[_ngcontent-%COMP%]{color:blue}.lblhead[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;text-align:center;padding-top:5px;padding-bottom:5px}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,n.u5,a.Pc,f]]}),t})()},5001:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var o=i(9786),n=i(3018),a=i(7053);let r=(()=>{class t{constructor(t){this.authService=t,this.lang="",this.userId=""}getLano(t){var e="";return o.Z.firestore().collection("userLanguage").doc(t).get().then(t=>{e=t.data().language}),e}getLanguage(t){return o.Z.firestore().collection("userLanguage").doc(t).get().then(t=>{this.lang=t.data().language}),this.lang}languageValidation(){}addLanguage(t,e){return new Promise((i,n)=>{o.Z.firestore().collection("userLanguage").doc(e).set({language:t,updatedOn:o.Z.firestore.FieldValue.serverTimestamp()}).then(t=>i(t),t=>n(t))})}setLanguage(){}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(a.$))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);