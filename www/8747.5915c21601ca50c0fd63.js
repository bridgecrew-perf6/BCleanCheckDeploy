(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[8747],{8747:(e,t,i)=>{"use strict";i.d(t,{z:()=>k});var n=i(4762),a=i(9786),s=i(3018),o=i(2859),c=i(6147),r=i(5496),l=i(5001),d=i(7053),h=i(8583),g=i(665);function u(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-input",11),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().cleaningAreaEn=t}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngModel",e.cleaningAreaEn),s.xp6(1),s.hij("",e.chkFor,"\xa0 ")}}function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-input",11),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().cleaningAreaEs=t}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngModel",e.cleaningAreaEs),s.xp6(1),s.hij("",e.chkFor,"\xa0 ")}}function p(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-input",12),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().cleaningAreaName=t}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngModel",e.cleaningAreaName),s.xp6(1),s.hij("",e.cleaningAreaEn," Name:")}}function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-input",12),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().cleaningAreaName=t}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngModel",e.cleaningAreaName),s.xp6(1),s.hij("Nombre de ",e.cleaningAreaEs," :")}}function A(e,t){if(1&e&&(s.TgZ(0,"ion-label",17),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.AsE("",e.index," ",e.cleaningItemEn,"")}}function C(e,t){if(1&e&&(s.TgZ(0,"ion-label",17),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.AsE("",e.index," ",e.cleaningItemEs,"")}}function b(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-card"),s.TgZ(1,"ion-item-divider"),s.TgZ(2,"ion-checkbox",13),s.NdJ("ionChange",function(t){const i=s.CHM(e).$implicit;return s.oxw().checkedItem(t,i.id)}),s.qZA(),s._uU(3," \xa0\xa0 "),s.YNc(4,A,2,2,"ion-label",14),s.YNc(5,C,2,2,"ion-label",14),s._uU(6," \xa0\xa0 "),s.TgZ(7,"small"),s.TgZ(8,"ion-checkbox",15),s.NdJ("ionChange",function(t){const i=s.CHM(e).$implicit;return s.oxw().notApplicable(t,i.id)}),s.qZA(),s.TgZ(9,"ion-label"),s._uU(10,"N/A"),s.qZA(),s.qZA(),s.TgZ(11,"small"),s.TgZ(12,"ion-input",16),s.NdJ("ngModelChange",function(e){return t.$implicit.commentNA=e})("ionChange",function(){const t=s.CHM(e).$implicit;return s.oxw().naCommentChange(t.id)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw();s.xp6(2),s.Q6J("checked",e.checked),s.xp6(2),s.Q6J("ngIf","EN"===i.cleaningAreaLan),s.xp6(1),s.Q6J("ngIf","ES"===i.cleaningAreaLan),s.xp6(3),s.Q6J("checked",e.notApplicable),s.xp6(4),s.Q6J("ngModel",e.commentNA)("hidden",!e.notApplicable)}}function v(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-button",18),s.NdJ("click",function(){return s.CHM(e),s.oxw().submitENChecklist()}),s._uU(1,"Submit"),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("disabled",e.btnSubmitDisabled)}}function I(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-button",18),s.NdJ("click",function(){return s.CHM(e),s.oxw().submitESChecklist()}),s._uU(1,"Enviar"),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("disabled",e.btnSubmitDisabled)}}let k=(()=>{class e{constructor(e,t,i,n,a,s,o,c){this.modalCtrl=e,this.toastCtrl=t,this.loadingCtrl=i,this.chkListSubServ=n,this.route=a,this.lanServ=s,this.authService=o,this.navCtrl=c,this.cleaningAreaEn="",this.cleaningAreaEs="",this.careaId="",this.cleaningItems=[],this.cleaningItemsDesc=[],this.cleaningAreaName="",this.notSelectedItems=[],this.checkChecked=!1,this.unselectedItems="",this.btnSubmitDisabled=!1,this.naComment="",this.soption="",this.chkFor="",this.cleaningAreaLan="",this.checkListLan="",this.indexes=[],this.indexesLen=0,this.indexesMin=0,this.langu="",this.userUid="",this.userDisplayName="",this.userEmail="",this.lastAname="",this.userLanguage(),this.cleaningAreaEn=this.chkListSubServ.enCleaningArea,this.cleaningAreaEs=this.chkListSubServ.esCleaningArea,this.careaId=this.chkListSubServ.cleaningAreaId,this.getCleaningItemByArea(),this.getCleaningItemsName(),this.getUserDisplayName()}ngOnInit(){}userLanguage(){this.authService.userDetails().forEach(e=>{a.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language)})})}getUserUid(){this.authService.userDetails().forEach(e=>{this.userUid=e.uid})}getUserDisplayName(){this.authService.userDetails().forEach(e=>{this.userDisplayName=e.displayName})}getUserEmail(){this.authService.userDetails().forEach(e=>{this.userEmail=e.email})}getCleaningItemByArea(){return(0,n.__awaiter)(this,void 0,void 0,function*(){var e=[];this.indexes=[];var t=0,i=0;this.cleaningItems=[];let s=this.loadingCtrl.create({message:"Loading ..."});(yield s).present(),a.Z.firestore().collection("cleaningItem").where("cleaningAreaEn","==",this.cleaningAreaEn).get().then(o=>(0,n.__awaiter)(this,void 0,void 0,function*(){o.forEach(e=>{this.indexes.push(e.data().index)}),t=this.indexes.length;for(var n=0;n<t-1;n++){i=n;for(var c=n+1;c<t-1;c++)this.indexes[c]<this.indexes[i]&&(i=c);e=this.indexes[i],this.indexes[i]=this.indexes[n],this.indexes[n]=e}for(n=0;n<this.indexes.length;n++)a.Z.firestore().collection("cleaningItem").where("cleaningAreaEn","==",this.cleaningAreaEn).where("index","==",this.indexes[n]).get().then(e=>{e.forEach(e=>{this.cleaningItems.push({id:e.id,index:e.data().index,cleaningItemEn:e.data().cleaningItemEn,cleaningItemEs:e.data().cleaningItemEs,checked:!1,checkedText:"",notApplicable:!1,notApplicableText:"",commentNA:""})})});(yield s).dismiss()})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:2e4})).present(),console.log(e)}))})}getCleaningItemsName(){return(0,n.__awaiter)(this,void 0,void 0,function*(){this.cleaningItemsDesc=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),a.Z.firestore().collection(this.chkListSubServ.enCleaningArea).get().then(t=>(0,n.__awaiter)(this,void 0,void 0,function*(){t.forEach(e=>{this.cleaningItemsDesc.push(e)}),(yield e).dismiss()})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})}submitESChecklist(){return(0,n.__awaiter)(this,void 0,void 0,function*(){this.checkESSelection(),this.notSelectedItems.length<=0&&""!==this.lastAname?this.authService.userDetails().forEach(e=>{a.Z.firestore().collection("checkList").add({areaId:this.chkListSubServ.cleaningAreaId,area:this.chkListSubServ.esCleaningArea,areaName:this.lastAname,checkListStatus:"completed",created:a.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName,approvalComment:"",updatedOn:a.Z.firestore.FieldValue.serverTimestamp(),updatedBy:e.email,timeRef:"",rejectionComment:""}).then(t=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"CheckList fue enviado exitosamente.",duration:3e3})).present(),a.Z.firestore().collection("checkListItems").add({checklistId:t.id,items:this.cleaningItems,created:a.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName,chkLanguage:this.checkListLan}).then(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Opciones agregadas satisfactoriamente.",duration:3e3})).present(),this.dismiss()})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}):(1===this.notSelectedItems.length&&(this.notSelectedItems.forEach(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e+" no est\xe1 seleccionado.",duration:3e3})).present()})),this.unselectedItems=""),this.notSelectedItems.length>1&&(this.notSelectedItems.forEach(e=>{this.unselectedItems=this.unselectedItems+e}),(yield this.toastCtrl.create({message:this.unselectedItems+" no est\xe1n seleccionados.",duration:3e3})).present(),this.unselectedItems=""),""===this.lastAname&&(yield this.toastCtrl.create({message:"Digite el nombre del \xe1rea!",duration:3e3})).present())})}submitENChecklist(){return(0,n.__awaiter)(this,void 0,void 0,function*(){this.checkENSelection(),this.notSelectedItems.length<=0&&""!==this.lastAname?this.authService.userDetails().forEach(e=>{this.userEmail=e.email,a.Z.firestore().collection("checkList").add({areaId:this.chkListSubServ.cleaningAreaId,area:this.chkListSubServ.enCleaningArea,areaName:this.lastAname,checkListStatus:"completed",created:a.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName,approvalComment:"",updatedOn:a.Z.firestore.FieldValue.serverTimestamp(),updatedBy:e.email,timeRef:"",rejectionComment:""}).then(t=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"CheckList was added successfully.",duration:3e3})).present(),a.Z.firestore().collection("checkListItems").add({checklistId:t.id,items:this.cleaningItems,created:a.Z.firestore.FieldValue.serverTimestamp(),owner:e.uid,owner_name:e.displayName,chkLanguage:this.checkListLan}).then(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"CheckListItems were added successfully.",duration:3e3})).present(),this.dismiss()})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}):(1===this.notSelectedItems.length&&(this.notSelectedItems.forEach(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e+" is not selected",duration:3e3})).present()})),this.unselectedItems=""),this.notSelectedItems.length>1&&(this.notSelectedItems.forEach(e=>{this.unselectedItems=this.unselectedItems+e}),(yield this.toastCtrl.create({message:this.unselectedItems+" are not selected",duration:3e3})).present(),this.unselectedItems=""),""===this.lastAname&&(yield this.toastCtrl.create({message:"Type Cleaning area name!",duration:3e3})).present())})}dismiss(){return(0,n.__awaiter)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss(this.taskObject)})}checkedItem(e,t){this.cleaningItems.forEach(i=>{i.id===t&&(i.checked=e.detail.checked,!0===i.checked?(i.notApplicable=!1,i.checkedText="OK"):i.checkedText="")})}notApplicable(e,t){this.cleaningItems.forEach(i=>{i.id===t&&(i.notApplicable=e.detail.checked,!0===i.notApplicable?(i.checked=!1,this.btnSubmitDisabled=!0,i.notApplicableText="N/A"):(this.btnSubmitDisabled=!1,i.notApplicableText=""))})}naCommentChange(e){this.cleaningItems.forEach(t=>{t.id===e&&(this.btnSubmitDisabled=""===t.commentNA)})}checkENSelection(){return this.notSelectedItems=[],this.cleaningItems.forEach(e=>{e.checked||e.notApplicable||this.notSelectedItems.push(e.cleaningItemEn)}),this.notSelectedItems}checkESSelection(){return this.notSelectedItems=[],this.cleaningItems.forEach(e=>{e.checked||e.notApplicable||this.notSelectedItems.push(e.cleaningItemEs)}),this.notSelectedItems}Logout(){this.authService.logoutUser().then(()=>(0,n.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(e=>(0,n.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,duration:3e3})).present()}))}getUserLanguage(e){switch(this.checkListLan=e,e){case"English":this.chkFor="CheckList For:",this.cleaningAreaLan="EN";break;case"Spanish":this.chkFor="CheckList Para:",this.cleaningAreaLan="ES"}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.IN),s.Y36(o.yF),s.Y36(o.HT),s.Y36(c.r),s.Y36(r.F0),s.Y36(l.L),s.Y36(d.$),s.Y36(o.SH))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-check-list-sub"]],decls:21,vars:9,consts:[["color","danger"],[1,"lblHeading"],["name","close","slot","end","size","large",1,"ion-padding",3,"click"],[1,"checkListRow"],["class","inputText","type","text","disabled","true",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","hidden","",3,"ngModel","ngModelChange"],[1,"aName"],["class","inNameB","type","text","disabled","true",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","placeholder","Area Name",1,"lname",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["style","margin-right: auto;margin-left: auto;",3,"disabled","click",4,"ngIf"],["type","text","disabled","true",1,"inputText",3,"ngModel","ngModelChange"],["type","text","disabled","true",1,"inNameB",3,"ngModel","ngModelChange"],[3,"checked","ionChange"],["class","listLabel",4,"ngIf"],["mode","md",1,"checkbox-square",2,"shape-outside","padding-box",3,"checked","ionChange"],[1,"na",3,"ngModel","hidden","ngModelChange","ionChange"],[1,"listLabel"],[2,"margin-right","auto","margin-left","auto",3,"disabled","click"]],template:function(e,t){1&e&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-title"),s.TgZ(3,"ion-label",1),s._uU(4,"CheckList"),s.qZA(),s.qZA(),s.TgZ(5,"ion-icon",2),s.NdJ("click",function(){return t.dismiss()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-content"),s.TgZ(7,"ion-grid"),s.TgZ(8,"ion-row",3),s.YNc(9,u,2,2,"ion-input",4),s.YNc(10,m,2,2,"ion-input",4),s.TgZ(11,"ion-input",5),s.NdJ("ngModelChange",function(e){return t.careaId=e}),s.qZA(),s.qZA(),s.TgZ(12,"ion-row",6),s.YNc(13,p,2,2,"ion-input",7),s.YNc(14,f,2,2,"ion-input",7),s.TgZ(15,"ion-input",8),s.NdJ("ngModelChange",function(e){return t.lastAname=e}),s.qZA(),s.qZA(),s.TgZ(16,"ion-row"),s.YNc(17,b,13,6,"ion-card",9),s.qZA(),s.TgZ(18,"ion-row"),s.YNc(19,v,2,1,"ion-button",10),s.YNc(20,I,2,1,"ion-button",10),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(9),s.Q6J("ngIf","EN"===t.cleaningAreaLan),s.xp6(1),s.Q6J("ngIf","ES"===t.cleaningAreaLan),s.xp6(1),s.Q6J("ngModel",t.careaId),s.xp6(2),s.Q6J("ngIf","EN"===t.cleaningAreaLan),s.xp6(1),s.Q6J("ngIf","ES"===t.cleaningAreaLan),s.xp6(1),s.Q6J("ngModel",t.lastAname),s.xp6(2),s.Q6J("ngForOf",t.cleaningItems),s.xp6(2),s.Q6J("ngIf","EN"===t.cleaningAreaLan),s.xp6(1),s.Q6J("ngIf","ES"===t.cleaningAreaLan))},directives:[o.Gu,o.sr,o.wd,o.Q$,o.gu,o.W2,o.jY,o.Nd,h.O5,o.pK,o.j9,g.JJ,g.On,h.sg,o.PM,o.rH,o.nz,o.w,o.YG],styles:[".listLabel[_ngcontent-%COMP%]{font-size:auto}.checkListRow[_ngcontent-%COMP%]{background-color:#00c3ff;align-content:center;height:50px}.inputText[_ngcontent-%COMP%]{font:700;margin-left:auto;margin-right:auto;font-size:large}.lblHeading[_ngcontent-%COMP%]{color:#fff}.lbls[_ngcontent-%COMP%]{color:blue}.na[_ngcontent-%COMP%]{border:solid;border-color:#7cfc00;width:300px}.item[_ngcontent-%COMP%]{width:auto}.inNameB[_ngcontent-%COMP%]{border-bottom:solid;background-color:gray;text-indent:15px}.aName[_ngcontent-%COMP%]{align-content:center}.lname[_ngcontent-%COMP%]{text-indent:15px;border-bottom:solid blue}"]}),e})()},5001:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});var n=i(9786),a=i(3018),s=i(7053);let o=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return n.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return n.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((i,a)=>{n.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:n.Z.firestore.FieldValue.serverTimestamp()}).then(e=>i(e),e=>a(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.$))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6147:(e,t,i)=>{"use strict";i.d(t,{r:()=>a});var n=i(3018);let a=(()=>{class e{constructor(){this.enCleaningArea="",this.esCleaningArea="",this.cleaningAreaId=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);