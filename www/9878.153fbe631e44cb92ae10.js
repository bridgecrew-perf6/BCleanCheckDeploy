(self.webpackChunkBCleanCheck=self.webpackChunkBCleanCheck||[]).push([[9878],{9878:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EmployeePageModule:()=>b});var o=i(8583),n=i(665),a=i(2859),s=i(5496),r=i(4762),l=i(9786),c=i(8076),m=i(5205),d=i(8443),h=i(3082),u=i(3018),p=i(9089),g=i(8805),f=i(3367),y=i(5001),N=i(3278),Z=i(7053);function v(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",22),u.NdJ("click",function(){u.CHM(e);const t=u.oxw().$implicit;return u.oxw().disableOrEnable(t.did,t.Name,t.Email,t.Status)}),u._UZ(1,"ion-icon",23),u.qZA()}}function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",24),u.NdJ("click",function(){u.CHM(e);const t=u.oxw().$implicit;return u.oxw().disableOrEnable(t.did,t.Name,t.Email,t.Status)}),u._UZ(1,"ion-icon",23),u.qZA()}}function S(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-card"),u.TgZ(1,"ion-item-divider"),u.TgZ(2,"ion-grid"),u.TgZ(3,"ion-row",12),u._UZ(4,"img",13),u.qZA(),u.TgZ(5,"ion-row"),u.TgZ(6,"ion-input",14),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().employeeId=t}),u._uU(7),u.qZA(),u.qZA(),u.TgZ(8,"ion-row"),u.TgZ(9,"ion-input",14),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().employeeName=t}),u._uU(10),u.qZA(),u.qZA(),u.TgZ(11,"ion-row"),u.TgZ(12,"ion-input"),u._uU(13),u.qZA(),u.qZA(),u.TgZ(14,"ion-row"),u.TgZ(15,"ion-input",14),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().employeeLastName=t}),u._uU(16),u.qZA(),u.qZA(),u.TgZ(17,"ion-row"),u.TgZ(18,"ion-input"),u._uU(19),u.qZA(),u.qZA(),u.TgZ(20,"ion-row"),u.TgZ(21,"ion-input",14),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().employeeEmail=t}),u._uU(22),u.qZA(),u.qZA(),u.TgZ(23,"ion-row"),u.TgZ(24,"ion-input"),u._uU(25),u.qZA(),u.qZA(),u.TgZ(26,"ion-row"),u.TgZ(27,"ion-button",15),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().createUser(t.Name,t.LastName,t.SecondLastName,t.Email,t.profileImageUrl)}),u._uU(28),u.qZA(),u.qZA(),u.TgZ(29,"ion-row"),u.TgZ(30,"ion-button",16),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().addWarning(t.Email,t.Name)}),u._UZ(31,"ion-icon",17),u.qZA(),u.TgZ(32,"ion-button",18),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().updateProfile(t.did,t.Email,t.MiddleName,t.Id,t.LastName,t.Name,t.PhoneNumber,t.SecondLastName,t.created,t.owner,t.owner_name,t.profileImageUrl)}),u._UZ(33,"ion-icon",19),u.qZA(),u.YNc(34,v,2,0,"ion-button",20),u.YNc(35,w,2,0,"ion-button",21),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(4),u.Q6J("src",e.profileImageUrl,u.LSH),u.xp6(2),u.Q6J("ngModel",i.employeeId),u.xp6(1),u.AsE("",i.eId," ",e.Id,""),u.xp6(2),u.Q6J("ngModel",i.employeeName),u.xp6(1),u.AsE("",i.name," ",e.Name,""),u.xp6(3),u.AsE("",i.middleName," ",e.MiddleName,""),u.xp6(2),u.Q6J("ngModel",i.employeeLastName),u.xp6(1),u.AsE("",i.lastName," ",e.LastName,""),u.xp6(3),u.AsE("",i.secondLastName," ",e.SecondLastName,""),u.xp6(2),u.Q6J("ngModel",i.employeeEmail),u.xp6(1),u.AsE("",i.email," ",e.Email,""),u.xp6(3),u.AsE("",i.phoneNumber," ",e.PhoneNumber,""),u.xp6(3),u.Oqu(i.createUserBtn),u.xp6(6),u.Q6J("ngIf","Active"===e.Status),u.xp6(1),u.Q6J("ngIf","Inactive"===e.Status)}}const E=function(){return["/manager"]},L=function(){return["/new-employee"]},T=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,a,s,r,l,c,m){this.route=e,this.loadingCtrl=t,this.toastCtrl=i,this.modalCtrl=o,this.userService=n,this.empTranService=a,this.warningService=s,this.lanServ=r,this.profServ=l,this.authService=c,this.navCtrl=m,this.profileImages=[],this.password="",this.employees=[],this.daten=new Date,this.role="subordinate",this.employeeId="",this.employeeName="",this.employeeLastName="",this.employeeSecondLastName="",this.employeeEmail="",this.image="",this.dname="",this.name="",this.middleName="",this.lastName="",this.secondLastName="",this.email="",this.phoneNumber="",this.createUserBtn="",this.eId="",this.emp="",this.langu="",this.userLanguage(),this.displayEmployeeProfile()}userLanguage(){this.authService.userDetails().forEach(e=>{l.Z.firestore().collection("userLanguage").doc(e.uid).get().then(e=>{this.getUserLanguage(e.data().language),this.langu=e.data().language})})}ngOnInit(){}displayEmployeeProfile(){return(0,r.__awaiter)(this,void 0,void 0,function*(){this.employees=[],this.profileImages=[];let e=this.loadingCtrl.create({message:"Loading ..."});(yield e).present(),l.Z.firestore().collection("employee").get().then(t=>(0,r.__awaiter)(this,void 0,void 0,function*(){t.forEach(e=>{this.employees.push({did:e.id,profileImageUrl:this.getEmployeePhoto(e.data().profileImageUrl),Id:e.data().Id,Name:e.data().Name,MiddleName:e.data().MiddleName,LastName:e.data().LastName,SecondLastName:e.data().SecondLastName,Email:e.data().Email,PhoneNumber:e.data().PhoneNumber,Status:e.data().Status})}),(yield e).dismiss()})).catch(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))})}getEmployeePhoto(e){var t="";return""!=e?t=e:("Spanish"===this.langu&&(t="../../assets/EmployeeDefaultImages/employeePicEs.png"),"English"===this.langu&&(t="../../assets/EmployeeDefaultImages/employeePicEn.png")),t}validateProfileImgUrl(e){var t="";l.Z.storage().ref("profilePhotos/"+e).getDownloadURL().then(e=>{t=e}).catch(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){t="../../assets/icon/noProfilePic.png"})),this.profileImages.push(t)}createUser(e,t,i,o,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){this.employeeName=e,this.employeeLastName=t,this.employeeSecondLastName=i,this.employeeEmail=o,this.password=this.employeeId+"###"+ +this.daten.toString().replace(" ","#")+this.employeeLastName+"%^^%",this.userService.displayName=this.employeeName+" "+this.employeeLastName+" "+this.employeeSecondLastName,this.userService.email=this.employeeEmail,this.userService.password=this.password,this.userService.profileImageUrl=n;const a=yield this.modalCtrl.create({component:d.l});return a.onDidDismiss().then(e=>{this.displayEmployeeProfile()}),yield a.present()})}createSystemUser(e){this.role=e,this.dname=this.employeeName+this.employeeLastName,l.Z.auth().createUserWithEmailAndPassword(this.employeeEmail,this.password).then(e=>{e.user.updateProfile({displayName:this.dname,photoURL:this.image}).then(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){l.Z.firestore().collection("userRole").doc(l.Z.auth().currentUser.uid).set({role:this.role,created:l.Z.firestore.FieldValue.serverTimestamp(),displayName:this.employeeName+this.employeeLastName,userEmail:this.employeeEmail,updatedOn:l.Z.firestore.FieldValue.serverTimestamp()}),l.Z.auth().sendPasswordResetEmail(this.employeeEmail).then(()=>(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Password change email was sent successfully",duration:3e3})).present()})).catch(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()})),(yield this.toastCtrl.create({message:this.employeeName+this.employeeLastName+" was registered successfully",duration:3e3})).present()}))}).catch(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e.message,duration:3e3})).present()}))}gotoTransactions(e,t,i,o,n,a,s){this.empTranService.empDocId=e,this.empTranService.empId=t,this.empTranService.empName=i,this.empTranService.empLastName=o,this.empTranService.empSecondLastName=n,this.empTranService.empEmail=a,this.empTranService.empPhoneNumber=s}addWarning(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){this.warningService.User=e,this.warningService.UserName=t;const i=yield this.modalCtrl.create({component:m.X});return i.onDidDismiss().then(e=>{}),yield i.present()})}disableOrEnable(e,t,i,o){return(0,r.__awaiter)(this,void 0,void 0,function*(){this.empTranService.empId=e,this.empTranService.empName=t,this.empTranService.empEmail=i,this.empTranService.empStatus=o;const n=yield this.modalCtrl.create({component:c.O});return n.onDidDismiss().then(e=>{this.displayEmployeeProfile()}),yield n.present()})}Logout(){this.authService.logoutUser().then(()=>(0,r.__awaiter)(this,void 0,void 0,function*(){this.navCtrl.navigateBack("login"),(yield this.toastCtrl.create({message:"Logout successfull",duration:3e3})).present()})).catch(e=>(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,duration:3e3})).present()}))}refresh(e){this.infiniteEvent&&this.infiniteEvent.enable(!0),e.complete()}getUserLanguage(e){switch(e){case"English":this.emp="Employee",this.eId="Employee Id:",this.name="Name:",this.middleName="Middle Name:",this.lastName=" Last Name:",this.secondLastName="Second Last Name:",this.email="Email:",this.phoneNumber="Phone Number:",this.createUserBtn="Create User";break;case"Spanish":this.emp="Empleado",this.eId="C\xf3digo Empleado:",this.name="Nombre:",this.middleName="Segundo Nombre:",this.lastName="Primer Apellido:",this.secondLastName="Segundo Apellido:",this.email="Correo:",this.phoneNumber="N\xfamero Telef\xf3nico:",this.createUserBtn="Crear Usuario"}}updateProfile(e,t,i,o,n,a,s,l,c,m,d,u){return(0,r.__awaiter)(this,void 0,void 0,function*(){this.profServ.idCol=e,this.profServ.Email=t,this.profServ.Middle=i,this.profServ.Id=o,this.profServ.LastName=n,this.profServ.Name=a,this.profServ.PhoneNumber=s,this.profServ.SecondLastName=l,this.profServ.created=c,this.profServ.owner=m,this.profServ.owner_name=d,this.profServ.profileImageUrl=u;const r=yield this.modalCtrl.create({component:h.Z});return r.onDidDismiss().then(e=>{this.displayEmployeeProfile()}),yield r.present()})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(s.F0),u.Y36(a.HT),u.Y36(a.yF),u.Y36(a.IN),u.Y36(p.K),u.Y36(g.F),u.Y36(f.q),u.Y36(y.L),u.Y36(N.y),u.Y36(Z.$),u.Y36(a.SH))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-employee"]],decls:18,vars:6,consts:[["color","danger"],[1,"lblHeading"],["slot","start"],["block","","clear","","color","Light","icon-only","",1,"backButton",3,"routerLink"],["name","arrow-back-outline",1,"backArrow"],["slot","end"],["icon-only","","clear","",1,"logoutBtn",3,"click"],["name","log-out",1,"lgIcon"],["slot","fixed",3,"ionRefresh"],["icon-only","","color","secondary",1,"button","button-small","addEmpBtn",3,"routerLink"],["name","add",1,"addEmp"],[4,"ngFor","ngForOf"],[1,"rowStyle"],["width","200px","height","300px",2,"margin-left","auto","margin-right","auto",3,"src"],[3,"ngModel","ngModelChange"],[3,"click"],["icon-only","","color","warning",1,"btnTran",3,"click"],["name","warning",1,"settings"],["icon-only","","color","success",1,"btnUpdate",3,"click"],["name","pencil-outline"],["icon-only","","size","small","color","success","name","ellipse",3,"click",4,"ngIf"],["icon-only","","size","small","color","danger","name","ellipse",3,"click",4,"ngIf"],["icon-only","","size","small","color","success","name","ellipse",3,"click"],["name","person-circle-outline"],["icon-only","","size","small","color","danger","name","ellipse",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-title"),u.TgZ(3,"ion-label",1),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"ion-buttons",2),u.TgZ(6,"ion-button",3),u._UZ(7,"ion-icon",4),u.qZA(),u.qZA(),u.TgZ(8,"ion-buttons",5),u.TgZ(9,"ion-button",6),u.NdJ("click",function(){return t.Logout()}),u._UZ(10,"ion-icon",7),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"ion-content"),u.TgZ(12,"ion-refresher",8),u.NdJ("ionRefresh",function(e){return t.refresh(e)}),u._UZ(13,"ion-refresher-content"),u.qZA(),u._UZ(14,"br"),u.TgZ(15,"ion-fab-button",9),u._UZ(16,"ion-icon",10),u.qZA(),u.YNc(17,S,36,22,"ion-card",11),u.qZA()),2&e&&(u.xp6(4),u.Oqu(t.emp),u.xp6(2),u.Q6J("routerLink",u.DdM(4,E)),u.xp6(9),u.Q6J("routerLink",u.DdM(5,L)),u.xp6(2),u.Q6J("ngForOf",t.employees))},directives:[a.Gu,a.sr,a.wd,a.Q$,a.Sm,a.YG,a.YI,s.rH,a.gu,a.W2,a.nJ,a.Wo,a.W4,o.sg,a.PM,a.rH,a.jY,a.Nd,a.pK,a.j9,n.JJ,n.On,o.O5],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#fff}.backArrow[_ngcontent-%COMP%]{color:#fff}.addEmp[_ngcontent-%COMP%]{font-size:50px}.addEmpBtn[_ngcontent-%COMP%]{height:50px;margin-left:auto;margin-right:auto}.rowStyle[_ngcontent-%COMP%]{align-content:center}.btnTran[_ngcontent-%COMP%]{color:secondary}.lblHeading[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.ez,n.u5,a.Pc,_]]}),e})()},5001:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});var o=i(9786),n=i(3018),a=i(7053);let s=(()=>{class e{constructor(e){this.authService=e,this.lang="",this.userId=""}getLano(e){var t="";return o.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{t=e.data().language}),t}getLanguage(e){return o.Z.firestore().collection("userLanguage").doc(e).get().then(e=>{this.lang=e.data().language}),this.lang}languageValidation(){}addLanguage(e,t){return new Promise((i,n)=>{o.Z.firestore().collection("userLanguage").doc(t).set({language:e,updatedOn:o.Z.firestore.FieldValue.serverTimestamp()}).then(e=>i(e),e=>n(e))})}setLanguage(){}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(a.$))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);